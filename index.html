<!DOCTYPE html>
<html>

<head>
  <title>Hello World!</title>

  <style>
    .droppable {
      border: 10px dashed #ccc;
      width: 300px;
      height: 100px;
      margin: 20px auto;
    }
    .droppable.hover {
      border: 10px dashed #333;
    }
  </style>
  <script src="vendor/react.js"></script>
  <script src="vendor/JSXTransformer.js"></script>
  <script type="text/jsx" src="src/main.jsx"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {

      function onVideoFileChosen(fileName) {
        VideoFile.streamsInFile(fileName, function(err, video, audio, subs) {
          if(err) return console.error(err);
          //empty list
          var subList = document.getElementById('subList');
          while (subList.firstChild) {
            subList.removeChild(subList.firstChild);
          }

          subs.forEach(function(sub) {
            var o = document.createElement('option');
            o.innerText = sub.language + " " + (sub.name || "");
            subList.appendChild(o);
          });
        });
      }

      var gui = require('nw.gui');
      var VideoUtils = require('./videoUtils');

      var videoPath = gui.App.argv[0] || null;

      if (videoPath !== null) {
        onVideoFileChosen(videoPath);
      }

      window.ondragover = function(e) {
        e.preventDefault();
        return false;
      };
      window.ondrop = function(e) {
        e.preventDefault();
        return false;
      };


    });
  </script>
</head>

<body>
  <h1>Choose which video file and subitle to use</h1>
  <h3>Video File:</h3>

  <select id="subList">

  </select>
</body>

</html>
